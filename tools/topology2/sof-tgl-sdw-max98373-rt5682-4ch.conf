#
# SOF TGL MAX98373-RT5682 ALH
#
#
# PCM 0 -> buffer1.0 -> volume1.0 -> buffer1.1 -> ALH Pin2
# PCM 1 <- buffer2.0 <- volume2.0 <- buffer2.1 <- ALH Pin3
# PCM 2 -> buffer3.0 -> smart_amp3.0 -> buffer3.1 -> ALH Pin 0x102.playback
#				^
#				|
#			    buffer3.2
#				^
#				|
# PCM 3 <- buffer4.0 <- muxdemux4.0 <- buffer4.1 <- ALH Pin 0x103.capture
# PCM 5 -> buffer6.0 -> volume6.0 -> buffer6.1 -> HDA4.playback
# PCM 6 -> buffer7.0 -> volume7.0 -> buffer7.1 -> HDA5.playback
# PCM 7 -> buffer8.0 -> volume8.0 -> buffer8.1 -> HDA6.playback
# PCM 8 -> buffer9.0 -> volume9.0 -> buffer9.1 -> HDA7.playback
# PCM 10 <- buffer11.0 <- volume11.0 <- buffer11.1 <- DMIC0
# PCM 12 <- buffer.12.0 <- kpb.12.0 <- buffer.12.1 <- volume.12.0 <- buffer.12.2 <- DMIC1
#				|
#				V
# 			   buffer.13.1 -> selector.13.0 -> buffer.13.0 -> detect.13

<include/common/tokens.conf>
<include/platform/intel/bxt.conf>
<include/pipelines/pipeline-volume-playback.conf>
<include/pipelines/pipeline-volume-capture.conf>
<include/pipelines/pipeline-passthrough-capture.conf>
<include/pipelines/pipeline-kpb-vol-capture.conf>
<include/pipelines/pipeline-smart-amp-playback.conf>
<include/pipelines/pipeline-smart-amp-ref-capture.conf>
<include/pipelines/pipeline-detect.conf>
<include/common/connection.conf>
<include/common/pipe_endpoint.conf>
<include/common/dai_endpoint.conf>
<include/components/dai.conf>
<include/common/source.conf>
<include/common/sink.conf>
<include/components/detect.conf>
<include/components/detect_data.conf>
<include/components/smart_amp.conf>
<include/components/smart_amp_data.conf>
<include/dais/hda.conf>
<include/dais/alh.conf>
<include/dais/dmic.conf>
<include/common/manifest.conf>
<include/dais/pipe-dai-playback.conf>
<include/dais/pipe-dai-capture.conf>
#
#
# Pipeline definitions
#
# Pipeline ID:1 PCM ID: 0
Object.pipeline-volume-playback."1" {
	pipeline_id		1
	pcm_id			0
	pcm_name		"Jack Out"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			48000
	rate_min		48000
	rate_max		48000
	volume_mixer_name	"1 Master Playback Volume"
}

# Pipeline ID:2 PCM ID: 1
Object.pipeline-volume-capture."2" {
	pipeline_id		2
	pcm_id			1
	pcm_name		"Jack in"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			48000
	rate_min		48000
	rate_max		48000
	volume_mixer_name	"2 Master Capture Volume"
}

# Pipeline ID:3 PCM ID: 2
Object.pipeline-smart-amp-playback."3" {
	pipeline_id		3
	pcm_id			2
	pcm_name		"Speaker"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			48000
	rate_min		48000
	rate_max		48000
	smart_amp_class	"smart_amp"
	smart_amp_config	"dummy_amp_config"
	smart_amp_model	"dummy_amp_model"
	smart_amp_model_get	"dummy_amp_model_get"
}

# Pipeline ID:4 PCM ID: 3
Object.pipeline-smart-amp-ref-capture."4" {
	pipeline_id	4
	pcm_id		3
	pcm_name	"Amplifier Reference"
	format		"s32le"
	channels	2
	channels_min	2
	channels_max	2
	rate		48000
	rate_min	48000
	rate_max	48000
}

# Pipeline ID:6 PCM ID: 5
Object.pipeline-volume-playback."6" {
	pipeline_id		6
	pcm_id			5
	pcm_name		"HDMI1"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			48000
	rate_min		48000
	rate_max		48000
	volume_mixer_name	"6 Master Playback Volume"
}

# Pipeline ID:7 PCM ID: 6
Object.pipeline-volume-playback."7" {
	pipeline_id		7
	pcm_id			6
	pcm_name		"HDMI2"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			48000
	rate_min		48000
	rate_max		48000
	volume_mixer_name	"7 Master Playback Volume"
}

# Pipeline ID:8 PCM ID: 7
Object.pipeline-volume-playback."8" {
	pipeline_id		8
	pcm_id			7
	pcm_name		"HDMI3"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			48000
	rate_min		48000
	rate_max		48000
	volume_mixer_name	"8 Master Playback Volume"
}

# Pipeline ID:9 PCM ID: 8
Object.pipeline-volume-playback."9" {
	pipeline_id		9
	pcm_id			8
	pcm_name		"HDMI4"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			48000
	rate_min		48000
	rate_max		48000
	volume_mixer_name	"9 Master Playback Volume"
}

# Pipeline ID:11 PCM ID: 10
Object.pipeline-passthrough-capture."11" {
	pipeline_id	11
	pcm_id		10
	pcm_name	"DMIC"
	format		"s32le"
	channels	4
	channels_min	4
	channels_max	4
	rate		48000
	rate_min	48000
	rate_max	48000
}

# Pipeline ID:12 PCM ID: 12
Object.pipeline-kpb-vol-capture."12" {
	pipeline_id	12
	pcm_id		12
	pcm_name		"BufferedMic"
	format			"s32le"
	channels		2
	channels_min		2
	channels_max		2
	rate			16000
	rate_min		16000
	rate_max		16000
	period			20000
	volume_mixer_name	"9 KWD Capture Volume"
}

# Pipeline ID:13
Object.pipeline-detect."13" {
	pipeline_id	13
	format			"s24le"
	channels		2
	channels_min		2
	channels_max		2
	rate			16000
	rate_min		16000
	rate_max		16000
	period			20000
	stream_name		"BufferedMic.capture.12"
	detect_sink_name	"Detect Sink 13"
	detect_object_class	"detect"
	detect_config		"dummy_detect_config"
	detect_model		"dummy_detect_model"
}


#
# List of all DAIs
#
#ALH Index: 2, Direction: playback
Object.ALH."2.2.playback" {
	index			2
	direction		"playback"
	stream_name		"SDW0-Playback"
	id 			0
	default_hw_config	0
	format			"s24le"
	rate			48000
	ch			2
	Object.hw_config."0" {
		id	0
	}

	#include DAI components
	Object.pipeline-dai-playback."0" {
		period_source_count	2
		period_sink_count	0
	}
}

#ALH Index: 3, Direction: capture
Object.ALH."3" {
	index			3
	direction		"capture"
	stream_name		"SDW0-Capture"
	id 			1
	default_hw_config	1
	format			"s24le"
	rate			48000
	ch			2
	Object.hw_config."0" {
		id	1
	}

	#include DAI components
	Object.pipeline-dai-capture."0" {
		period_source_count	0
		period_sink_count	2
	}
}

#ALH Index: 0x102, Direction: playback
Object.ALH."0x102" {
	index			258
	direction		"playback"
	stream_name		"SDW1-Playback"
	id 			2
	default_hw_config	2
	format			"s24le"
	rate			48000
	ch			2
	Object.hw_config."0" {
		id	2
	}

	#include DAI components
	Object.pipeline-dai-playback."0" {
		period_source_count	2
		period_sink_count	0
	}
}

#ALH Index: 0x103, Direction: capture
Object.ALH."0x103" {
	index			259
	direction		"capture"
	stream_name		"SDW1-Capture"
	id 			3
	default_hw_config	3
	format			"s24le"
	rate			48000
	ch			2
	Object.hw_config."0" {
		id	3
	}

	#include DAI components
	Object.pipeline-dai-capture."0" {
		period_source_count	0
		period_sink_count	2
	}

}

# HDA Playback DAI Index: 4,  Direction: playback
# Capture DAI index is unused
Object.HDA."4" {
	index			4
	direction		"playback"
	stream_name		"iDisp1"
	id 			6
	format			"s32le"
	default_hw_config	6
	Object.hw_config."0" {
		id	6
	}

	#include DAI components
	Object.pipeline-dai-playback."0" {
		period_source_count	2
		period_sink_count	0
	}
}

# HDA Playback DAI Index: 5,  Direction: playback
# Capture DAI index is unused
Object.HDA."5" {
	index			5
	direction		"playback"
	stream_name		"iDisp2"
	id 			7
	format			"s32le"
	default_hw_config	7
	Object.hw_config."0" {
		id	7
	}

	#include DAI components
	Object.pipeline-dai-playback."0" {
		period_source_count	2
		period_sink_count	0
	}
}

# HDA Playback DAI Index: 6,  Direction: playback
# Capture DAI index is unused
Object.HDA."6" {
	index			6
	direction		"playback"
	stream_name		"iDisp3"
	id 			8
	format			"s32le"
	default_hw_config	8
	Object.hw_config."0" {
		id	8
	}

	#include DAI components
	Object.pipeline-dai-playback."0" {
		period_source_count	2
		period_sink_count	0
	}
}

# HDA Playback DAI Index: 6,  Direction: playback
# Capture DAI index is unused
Object.HDA."7" {
	index			7
	direction		"playback"
	stream_name		"iDisp4"
	id 			9
	format			"s32le"
	default_hw_config	9
	Object.hw_config."0" {
		id	9
	}

	#include DAI components
	Object.pipeline-dai-playback."0" {
		period_source_count	2
		period_sink_count	0
	}
}

# DMIC DAI Index: 0,  Direction: capture
Object.DMIC."0" {
	index			0
	direction		"capture"
	stream_name		"dmic01"
	id 			4
	format			"s32le"
	default_hw_config	4
	Object.hw_config."0" {
		id	4
	}
	driver_version		1
	clk_min		500000
	clk_max		4800000
	duty_min		40
	duty_max		60
	sample_rate		48000
	fifo_word_length	32
	unmute_ramp_time_ms	200
	num_pdm_active		2

	# PDM controller config
	Object.pdm_config."0" {
		ctrl_id	0
	}

	Object.pdm_config."1" {
		ctrl_id	1
	}

	#include DAI components
	Object.pipeline-dai-capture."0" {
		period_source_count	0
		period_sink_count	2
	}
}


# DMIC DAI Index: 1,  Direction: capture
Object.DMIC."1" {
	index			1
	direction		"capture"
	stream_name		"dmic16k"
	id 			5
	format			"s32le"
	default_hw_config	5
	Object.hw_config."0" {
		id	5
	}
	driver_version		1
	clk_min		500000
	clk_max		4800000
	duty_min		40
	duty_max		60
	sample_rate		16000
	fifo_word_length	32
	unmute_ramp_time_ms	400
	num_pdm_active		1

	# PDM controller config
	Object.pdm_config."0" {
		ctrl_id	0
	}

	#include DAI components
	Object.pipeline-dai-capture."0" {
		period_source_count	0
		period_sink_count	3
	}
}

#
# List of all endpoint connections
#
# Connect: Pipeline 1 -> ALH 2 DAI_IN
Object.connection."0" {
	type		"endpoint"
	pipeline_id	1
	index		2
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	1
		index		0
	}
	Object.sink."0" {
		class		"dai_endpoint"
		type		"ALH"
		index		2
		direction_name	"playback"
	}
}

# Connect: ALH 3 DAI_OUT -> Pipeline 2
Object.connection."1" {
	type		"endpoint"
	pipeline_id	2
	index		3
	Object.sink."0" {
		class		"pipe_endpoint"
		pipeline_id	2
		index		0
	}
	Object.source."0" {
		class		"dai_endpoint"
		type		"ALH"
		index		3
		direction_name	"capture"
	}
}

# Connect muxdemux4.0 -> buffer3.2
Object.connection."2" {
	type		"endpoint"
	pipeline_id	3
	index		4
	Object.sink."0" {
		class		"pipe_endpoint"
		pipeline_id	3
		index		1
	}
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	4
		index		1
	}
}

# Connect: Pipeline 3 -> ALH 0x102 DAI_IN
Object.connection."3" {
	type		"endpoint"
	pipeline_id	3
	index		258
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	3
		index		0
	}
	Object.sink."0" {
		class		"dai_endpoint"
		type		"ALH"
		index		258
		direction_name	"playback"
	}
}

# Connect: ALH 0x103 DAI_OUT -> Pipeline 4
Object.connection."4" {
	type		"endpoint"
	pipeline_id	4
	index		259
	Object.sink."0" {
		class		"pipe_endpoint"
		pipeline_id	4
		index		0
	}
	Object.source."0" {
		class		"dai_endpoint"
		type		"ALH"
		index		259
		direction_name	"capture"
	}
}

# Connect: Pipeline 6 -> HDA 4 DAI_IN
Object.connection."5" {
	type		"endpoint"
	pipeline_id	6
	index		4
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	6
		index		0
	}
	Object.sink."0" {
		class		"dai_endpoint"
		type		"HDA"
		index		4
		direction_name	"playback"
	}
}

# Connect: Pipeline 7 -> HDA 5 DAI_IN
Object.connection."6" {
	type		"endpoint"
	pipeline_id	7
	index		5
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	7
		index		0
	}
	Object.sink."0" {
		class		"dai_endpoint"
		type		"HDA"
		index		5
		direction_name	"playback"
	}
}

# Connect: Pipeline 8 -> HDA 6 DAI_IN
Object.connection."7" {
	type		"endpoint"
	pipeline_id	8
	index		6
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	8
		index		0
	}
	Object.sink."0" {
		class		"dai_endpoint"
		type		"HDA"
		index		6
		direction_name	"playback"
	}
}

# Connect: Pipeline 9 -> HDA 7 DAI_IN
Object.connection."8" {
	type		"endpoint"
	pipeline_id	9
	index		7
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	9
		index		0
	}
	Object.sink."0" {
		class		"dai_endpoint"
		type		"HDA"
		index		7
		direction_name	"playback"
	}
}

# Connect: DMIC 0 DAI_OUT -> Pipeline 11
Object.connection."9" {
	type		"endpoint"
	pipeline_id	11
	index		0
	Object.sink."0" {
		class		"pipe_endpoint"
		pipeline_id	11
		index		0
	}
	Object.source."0" {
		class		"dai_endpoint"
		type		"DMIC"
		index		0
		direction_name	"capture"
	}
}

# Connect: DMIC 1 DAI_OUT -> Pipeline 12
Object.connection."10" {
	type		"endpoint"
	pipeline_id	12
	index		1
	Object.sink."0" {
		class		"pipe_endpoint"
		pipeline_id	12
		index		0
	}
	Object.source."0" {
		class		"dai_endpoint"
		type		"DMIC"
		index		1
		direction_name	"capture"
	}
}

# Connect: kpb12.0 -> buffer13.0
Object.connection."11" {
	type		"endpoint"
	pipeline_id	12
	index		13
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	12
		index		2
	}
	Object.sink."0" {
		class		"pipe_endpoint"
		pipeline_id	13
		index		0
	}
}

# Connect: detect_sink.13 -> Pipeline 12 host
Object.connection."endpoint.13.0" {
	type		"endpoint"
	pipeline_id	13
	index		12
	Object.source."0" {
		class		"pipe_endpoint"
		pipeline_id	13
		index		1
	}
	Object.sink."0" {
		class		"pipe_endpoint"
		pipeline_id	12
		index		1
	}
}
